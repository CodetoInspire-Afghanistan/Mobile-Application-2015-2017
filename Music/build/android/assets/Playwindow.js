function createPlaywindowWin(e){function i(e){var i;"play"==e?w.playing||(w.play(),m.setMax(w.duration),p.setBackgroundImage("img/play-on.png"),u.setBackgroundImage("img/pause.png")):w.paused||(w.pause(),p.setBackgroundImage("img/play-button.png"),u.setBackgroundImage("img/pause-on.png"),clearInterval(i))}function a(){(w.playing||w.paused)&&(w.stop(),p.setBackgroundImage("img/play-button.png"),u.setBackgroundImage("img/pause.png"),m.setMessage("00:00:00"),w.setTime(0),m.setValue(0),"android"==Ti.Platform.name&&w.release())}function t(){w.playing&&w.time+1e4<w.duration&&w.setTime(w.time+1e4)}function n(){w.playing&&w.setTime(w.time-1e4)}var o,r,s,g=Ti.UI.createWindow({title:e.currentPlaywindow.name,backgroundColor:"#b57de0",orientationModes:[Ti.UI.PORTRAIT],layout:"vertical"}),d=Ti.UI.createView({layout:"vertical",height:Ti.UI.FILL,top:"10dp",bottom:0}),m=Ti.UI.createProgressBar({min:0,message:"00:00:00",color:"purple",width:"75%"}),c=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.SIZE,layout:"horizontal"}),p=Ti.UI.createButton({backgroundImage:"img/play-button.png",width:"50dp",left:"10dp",bottom:"5dp"}),l=Ti.UI.createButton({backgroundImage:"img/sstop.png",backgroundSelectedImage:"img/stop-on.png",width:"50dp",left:"10dp",bottom:"5dp"}),u=Ti.UI.createButton({backgroundImage:"img/pause.png",width:"50dp",left:"10dp",bottom:"5dp"}),h=Ti.UI.createButton({backgroundImage:"img/forward.png",backgroundSelectedImage:"img/forward-on.png",width:"50dp",left:"10dp",bottom:"5dp"}),I=Ti.UI.createButton({backgroundImage:"img/rewind.png",backgroundSelectedImage:"img/rewind-on.png",width:"50dp",left:"10dp",bottom:"5dp"}),f=Ti.UI.createImageView({image:e.currentPlaywindow.image,width:Ti.UI.FILL,top:0}),w=Ti.Media.createAudioPlayer({url:e.currentPlaywindow.description,allowBackground:!0,volume:1});p.addEventListener("click",function(e){i("play")}),u.addEventListener("click",function(e){i("pause")}),l.addEventListener("click",function(e){a()});var b;I.addEventListener("touchstart",function(e){b=setInterval(n,400)}),I.addEventListener("touchend",function(e){clearInterval(b)});var T;h.addEventListener("touchstart",function(e){T=setInterval(t,400)}),h.addEventListener("touchend",function(e){clearInterval(T)}),w.addEventListener("complete",function(e){a()}),w.addEventListener("progress",function(e){m.setValue(w.time),s=Math.floor(w.time/1e3%60),r=Math.floor(w.time/1e3/60%60),o=Math.floor(w.time/1e3/60/60%60),m.setMessage((o>9?o:"0"+o)+":"+(r>9?r:"0"+r)+":"+(s>9?s:"0"+s))});var L;return g.addEventListener("open",function(e){"android"==Ti.Platform.osname&&(g.activity?(L=g.activity.actionBar,L&&(L.displayHomeAsUp=!0),L.onHomeIconItemSelected=function(){g.close(),a()}):alert("con not open"))}),g.addEventListener("android:back",function(e){w.stop(),w.release(),g.close()}),w.addEventListener("complete",function(e){w.release()}),c.add(I),c.add(p),c.add(u),c.add(l),c.add(h),d.add(m),d.add(c),g.add(f),g.add(d),g}exports.createPlaywindowWin=createPlaywindowWin;